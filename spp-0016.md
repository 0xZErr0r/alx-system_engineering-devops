## Preamble

```
SPP: 0016
Title: Error Code
Author: Smilepay
Status: Active
Created: 04-01-2022
Updated: 05-01-2022
Discussion: N/A
```

## Description
Is a 4 digit hexadeciaml code that is used to determine the nature of an error and why it occurred. The first digit is a specific identifier while the other three are error numbers.

<br />

### The First Identifier Digits
```
|    The 1st digit       |                    Meaning                     |
| numerical identifier   |                  (Which .ms?)                  |  
| ---------------------- | ---------------------------------------------- |
|          1             | Phone Authentication Service                   |
|          2             | Registration Service                           |
|          3             | Auth (Authorization/Authentication) Service    |
|          4             | User Info Service                              |
|          5             | ME Service                                     |
|          6             | Multiple Account Service                       |
|          7             | Smile ID Generator Service                     |
|          8             | Block Service                                  |
|          9             | Transaction Control Service                    |
|         10             | Multiple Account Service                       |
|         11             | Hermes                                         |
|         12             | Database Transaction Service                   |
|         13             | Multiple Account DB Controller                 |
|         14             | Transaction History DB Controller              |
|         15             | Quota DB Controller                            |
|         16             | Exception Quota DB Controller                  |
|         17             | Limit DB Controller                            |
|         18             | Block DB Controller                            |
|         19             | Sub-Agent DB Controller                        |    
```

<br />

### The Last 3 Hexadecimal Digits
To calculate the possible number of combinations for the last three hexadecimal digits: <br /> 

16^3 = 4096
                   
which means there are 4095 possible error codes to be assigned for each identifier & here are some:
``` 
    | Decimal   | Hex     | 
    | base 10   | base 16 |
    | --------- | ------- |
    |    0	|    0    |
    |    1	|    1    |
    |    2	|    2    |
    |    3	|    3    |
    |    4	|    4    |
    |    5	|    5    |
    |    6	|    6    |
    |    7	|    7    |
    |    8	|    8    |
    |    9	|    9    |
    |   10	|    A    |
    |   11      |    B    |
    |   12	|    C    |
    |   13	|    D    |
    |   14	|    E    |
    |   15      |    F    |
    |   16	|   10    |
    |   17	|   11    |
    |   18	|   12    |
    |   19	|   13    |
    |   20	|   14    |
    |   21	|   15    |
    |   22	|   16    |
    |   23	|   17    |
    |   24	|   18    |
    |   25	|   19    |
    |   26	|   1A    |
    |   27	|   1B    |
    |   28	|   1C    |
    |   29	|   1D    |
    |   30	|   1E    |
    |   40	|   28    |
    |   50	|   32    |
    |   60	|   3C    |
    |   70	|   46    |
    |   80	|   50    |
    |   90	|   5A    |
    |  100	|   64    |
    |  200	|   C8    |
    | 1000	|  3E8    |
    | 2000	|  7D0    |
    | 3000      |  BB8    |
    | 4000      |  FA0    |
    | 4095      |  FFF    |
```

<br />

## Specification
### Error Code & Description

#### 1. Phone Authentication Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   1000  | Unable To Find Phone To Ban                                   |
|   1001  | Unable To Check If Phone Number Is Banned Or Not              |
|   1002  | Unable To Fetch Phone Number                                  |
|   1003  | Unable To Create Registration Token                           |
|   1004  | Unable To Create Authentication Permission Token              |
|   1005  | Unable To Check If Phone Number Exists                        |
|   1006  | Unable To Validate Phone Number                               |
|   1007  | Unable To Add New Phone Number                                |
|   1008  | Unable To Fetch Phone Number                                  |
```

#### 2. Registration Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   2000  | Unable To Create A New Authentication Permission Token        |
|   2001  | Unable To Check User Registered With Given Phone Number       |
|   2002  | Unable To Register User                                       |
|   2003  | Unable To Get User By Phone Number                            |
|   2004  | Unable To Validate Data Before Registering User               |
|   2005  | Unable To Validate Phone Number                               |
|   2006  | Unable To Extract Phone Number                                |
|   2007  | Unable To Add User                                            |
|   2008  | Unable To Add Phone Number For User                           |
```

#### 3. Auth Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   3000  | Invalid Refresh Token                                         |
|   3001  | Invalid Authorization Token                                   |
|   3002  | Unable To Remove Session                                      |
|   3003  | Unable To Create New Session                                  |
|   3004  | Unable To Create New JWT Auth Token                           |
|   3005  | Unable To Create New Session For New User                     |
|   3006  | Unable To Check If Refresh Token Exists Or Not                |
|   3007  | Unable To Fetch User Id By Refresh Token                      |
|   3008  | Unable To Check If A Session Exists                           |
|   3009  | Unable To Fetch User Data By Phone Number                     |
```

#### 4. User Info Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   4000  |                                                               |
```

#### 5. ME Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   5000  | Route Not Found                                               |
|   5001  | Unauthorized                                                  |
|   5002  | Data Not Found                                                |
|   5003  | Phone Number Not Found                                        |
|   5004  | Email Not Found                                               |
|   5005  | Picture Not Found                                             |
|   5006  | Internal Error Found                                          |
|   5007  | User Is Blocked                                               |
```

#### 6. Multiple Account Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   6000  | Bad Request                                                   |
|   6001  | Error Creating Hermes Account                                 |
|   6002  | Error Creating Smile Id                                       |
|   6003  | Internal Error                                                |
|   6004  | Resource Not Found                                            |
|   6005  | Unauthorized                                                  |
|   6006  | Invalid User Id                                               |
|   6007  | Account Upgrade Error                                         |
|   6008  | Account Create Error                                          |
|   6009  | API Error                                                     |
|   600A  | Validation Error                                              |
```

#### 7. Smile ID Generator Service
```
|  Error  |                              Error                            |
|  Code   |                           Description                         |  
| ------- | ------------------------------------------------------------- |
|   7000  | Bad Request                                                   |
|   7001  | Duplicate Reserved Id                                         |
|   7002  | Internal Error                                                |
|   7003  | Invalid Smile User Type                                       |
|   7004  | Invalid Smile Id                                              |
|   7005  | User Already Exists                                           |
|   7006  | User Does Not Exists                                          |
|   7007  | Unauthorized                                                  |
```

#### 8. Block Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   8000  | Unable To Block User                                          |
|   8001  | Unable To Unblock User                                        |
|   8002  | Unable To Unblock All User                                    |
|   8003  | Unable To Check If User Has Block Status                      |
|   8004  | Unable To Get All Block For User                              |
|   8005  | Unable To Get Block By Its Id From Block DB Controller        |
|   8006  | Unable To Get All Blocks For User Using The DB Controller     |
|   8007  | Unable To Save Block History                                  |
```

<br />

### Error Code Constants in Java

#### 1. Phone Authentication Service
```
public enum PhoneAutheErrorCode {
	
	UNABLE_TO_FIND_PHONE_TO_BAN("0x1000"),
	UNABLE_TO_CHECK_BANNED_PN("0x1001"),
	UNABLE_TO_FETCH_PN("0x1002"),
	UNABLE_TO_CREATE_REG_TOKEN("0x1003"),
	UNABLE_TO_CREATE_AUTH_TOKEN("0x1004"),
	UNABLE_TO_CHECK_PN_EXIST("0x1005"),
	UNABLE_TO_PN_VALID("0x1006"),
	UNABLE_TO_ADD_NEW_PN("0x1007"),
	UNABLE_TO_FETCH_PN("0x1008");

    private final String value;

}
```

#### 2. Registration Service
```
public enum RegistErrorCode {

	UNABLE_TO_CREATE_NEW_AUTH_TOKEN("0x2000"),
	UNABLE_TO_CHECK_USER_PN("0x2001"),
	UNABLE_TO_REGISTER_USER("0x2002"),
	UNABLE_TO_GET_USER_BY_PN("0x2003"),
	UNABLE_TO_VALIDATE_BEFORE_REGIST("0x2004"),
	UNABLE_TO_VALIDATE_PN("0x2005"),
	UNABLE_TO_EXTRACT_PN("0x2006")
	UNABLE_TO_ADD_USER("0x2007"),
	UNABLE_TO_ADD_PN_FOR_USER("0x2008");
	
    private final String value;

}
```

#### 3. Auth Service
```
public enum AuthErrorCode {

	INVALID_RT("0x3000"),
	INVALID_AT("0x3001"),
	UNABLE_TO_REMOVE_SESSION("0x3002"), 
	UNABLE_TO_CREATE_NEW_SESSION("0x3003"),
	UNABLE_TO_CREATE_NEW_JWT_AT("0x3004"),
	UNABLE_TO_CREATE_NEW_USER_SESSION("0x3005"),
	UNABLE_TO_CHECK_RT_EXIST("0x3006"),
	UNABLE_TO_FETCH_USER_ID_BY_RT("0x3007"),
	UNABLE_TO_CHECK_SESSION_EXIST("0x3008"),
	UNABLE_TO_FETCH_USER_DATA_BY_PN("0X3009");

    private final String value;

}
```

#### 4. User Info Service
```
public enum UserInfoErrorCode {

	AAA("0x4000"),
    AAA("0x4000"),
    AAA("0x4000");

    private final String value; 

}
```

#### 5. ME Service
```
public enum MeErrorCode {

	ROUTE_NOT_FOUND("0x5000"),
	UNAUTHORIZED("0x5001"),
	DATA_NOT_FOUND("0x5002"),
	PHONE_NUMBER_NOT_FOUND("0x5003"),
	EMAIL_NOT_FOUND("0x5004"),
	PICTURE_NOT_FOUND("0x5005"),
	INTERNAL_ERROR_FOUND("0x5006"),
	USER_IS_BLOCKED("0x5007");

    private final String value;

}
```

#### 6. Multiple Account Service
```
public enum MultipleAccountErrorCode {
    
    BAD_REQUEST("0x6000"),
    ERROR_CREATING_HERMES_ACCOUNT("0x6001"),
    ERROR_CREATING_SMILE_ID("0x6002"),
    INTERNAL_ERROR("0x6003"),
    RESOURCE_NOT_FOUND("0x6004"),
    UNAUTHORIZED("0x6005"),
    INVALID_USER_ID("0x6006"),
    ACCOUNT_UPGRADE_ERROR("0x6007"),
    ACCOUNT_CREATE_ERROR("0x6008"),
    API_ERROR("0x6009"),
    VALIDATION_ERROR("0x600A");

    private final String value;
    
}
```

#### 7. Smile ID Generator Service
```
public enum SmileIdGeneratorErrorCode {

    BAD_REQUEST("0x7000"),
    DUPLICATE_RESERVED_ID("0x7001"),
    INTERNAL_ERROR("0x7002"),
    INVALID_SMILE_USER_TYPE("0x7003"),
    INVALID_SMILE_ID("0x7004"),
    USER_ALREADY_EXISTS("0x7005"),
    USER_DOES_NOT_EXISTS("0x7006"),
    UNAUTHORIZED("0x7007");

    private final String value;

}
```

#### 8. Block Service
```
public enum BlockErrorCode {

    UNABLE_TO_BLOCK_USER("0x8000"),
    UNABLE_TO_UNBLOCK_USER("0x8001"),
    UNABLE_TO_UNBLOCK_ALL_USER("0x8002"),
    UNABLE_TO_CHECK_USER_BLOCK_STATUS("0x8003"),
    UNABLE_TO_GET_ALL_USER_BLOCKS("0x8004"),
    UNABLE_TO_GET_BLOCK_BY_ID("0x8005"),
    UNABLE_TO_GET_ALL_USER_BLOCKS("0x8006"),
    UNABLE_TO_SAVE_BLOCK_HISTORY("0x8007"),

    private final String value;

}
```

<br />

## Security Concerns
Security Concern 1: <br />
N/A
