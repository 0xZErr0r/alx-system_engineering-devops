## Preamble

```
SPP: 0016
Title: Error Code
Author: Smilepay
Status: Active
Created: 04-01-2022
Discussion: N/A
```

## Description
Is a 4 digit hexadeciaml code that is used to determine the nature of an error and why it occurred. The first digit is a specific identifier while the other three are error numbers.

<br />

### The First Identifier Digits
```
|    The 1st digit       |                    Meaning                     |
| numerical identifier   |                  (Which .ms?)                  |  
| ---------------------- | ---------------------------------------------- |
|         63             | Phone Verification Service                     |
|         49             | Registration Service                           |
|         98             | Auth (Authorization/Authentication) Service    |
|         19             | User Info Service                              |
|         81             | ME Service                                     |
|         10             | Multiple Account Service                       |
|         99             | Smile ID Generator Service                     |
|         13             | Block Service                                  |
|          2             | Transaction Control Service                    |
|          9             | Multiple Account Service                       |
|         73             | Hermes                                         |
|         51             | Database Transaction Service                   |
|         11             | Multiple Account DB Controller                 |
|         43             | Transaction History DB Controller              |
|         67             | Quota DB Controller                            |
|         95             | Exception Quota DB Controller                  |
|         22             | Limit DB Controller                            |
|          4             | Block DB Controller                            |
|         87             | Sub-Agent DB Controller                        |    
```

<br />

### The Last 3 Hexadecimal Digits
To calculate the possible number of combinations for the last three hexadecimal digits: <br /> 

16^3 = 4096
                   
which means there are 4095 possible error codes to be assigned for each identifier & here are some:
``` 
    | Decimal   | Hex     | 
    | base 10   | base 16 |
    | --------- | ------- |
    |    0	|    0    |
    |    1	|    1    |
    |    2	|    2    |
    |    3	|    3    |
    |    4	|    4    |
    |    5	|    5    |
    |    6	|    6    |
    |    7	|    7    |
    |    8	|    8    |
    |    9	|    9    |
    |   10	|    A    |
    |   11      |    B    |
    |   12	|    C    |
    |   13	|    D    |
    |   14	|    E    |
    |   15      |    F    |
    |   16	|   10    |
    |   17	|   11    |
    |   18	|   12    |
    |   19	|   13    |
    |   20	|   14    |
    |   21	|   15    |
    |   22	|   16    |
    |   23	|   17    |
    |   24	|   18    |
    |   25	|   19    |
    |   26	|   1A    |
    |   27	|   1B    |
    |   28	|   1C    |
    |   29	|   1D    |
    |   30	|   1E    |
    |   40	|   28    |
    |   50	|   32    |
    |   60	|   3C    |
    |   70	|   46    |
    |   80	|   50    |
    |   90	|   5A    |
    |  100	|   64    |
    |  200	|   C8    |
    | 1000	|  3E8    |
    | 2000	|  7D0    |
    | 3000      |  BB8    |
    | 4000      |  FA0    |
    | 4095      |  FFF    |
```

<br />

## Specification
### **Error Code & Description**

#### 1. Phone Verification Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  63000  | Unable To Find Phone To Ban                                   |
|  63001  | Unable To Check If Phone Number Is Banned Or Not              |
|  63002  | Unable To Create Registration Token                           |
|  63003  | Unable To Create Authentication Permission Token              |
|  63004  | Unable To Check If Phone Number Exists                        |
|  63005  | Unable To Validate Phone Number                               |
|  63006  | Internal Error Found                                          |
|  63007  | Route Not Found                                               |
|  63008  | Unauthorized                                                  |
|  63009  | Input Error                                                   |
|  6300A  | Verification Error Code                                       |
|  6300B  | Invalid Verification Code                                     |
|  6300C  | Invalid Verification Token                                    |
|  6300D  | Invalid Phone Number                                          |
|  6300E  | Try Again                                                     |
|  6300F  | Unable To Check                                               |
|  63010  | Unable To Add Phone Number                                    |
|  63011  | Unable To Fetch Phone Number                                  |
|  63012  | Validator Error                                               |
```

#### 2. Registration Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  49000  | Unable To Create A New Authentication Permission Token        |
|  49001  | Unable To Check User Registered With Given Phone Number       |
|  49002  | Unable To Register User                                       |
|  49003  | Unable To Get User By Phone Number                            |
|  49004  | Unable To Validate Data Before Registering User               |
|  49005  | Unable To Validate Phone Number                               |
|  49006  | Unable To Extract Phone Number                                |
|  49007  | Unable To Add User                                            |
|  49008  | Unable To Add Phone Number For User                           |
|  49009  | Internal Error Found                                          |
```

#### 3. Auth Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  98000  | Invalid Refresh Token                                         |
|  98001  | Invalid Authorization Token                                   |
|  98002  | Unable To Remove Session                                      |
|  98003  | Unable To Create New Session                                  |
|  98004  | Unable To Create New JWT Auth Token                           |
|  98005  | Unable To Create New Session For New User                     |
|  98006  | Unable To Check If Refresh Token Exists Or Not                |
|  98007  | Unable To Fetch User Id By Refresh Token                      |
|  98008  | Unable To Check If A Session Exists                           |
|  98009  | Unable To Fetch User Data By Phone Number                     |
|  9800A  | Internal Error Found                                          |
```

#### 4. User Info Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  19000  |                                                               |
```

#### 5. ME Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  81000  | Route Not Found                                               |
|  81001  | Unauthorized                                                  |
|  81002  | Data Not Found                                                |
|  81003  | Phone Number Not Found                                        |
|  81004  | Email Not Found                                               |
|  81005  | Picture Not Found                                             |
|  81006  | Internal Error Found                                          |
|  81007  | User Is Blocked                                               |
```

#### 6. Multiple Account Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  10000  | Bad Request                                                   |
|  10001  | Error Creating Hermes Account                                 |
|  10002  | Error Creating Smile Id                                       |
|  10003  | Internal Error                                                |
|  10004  | Resource Not Found                                            |
|  10005  | Unauthorized                                                  |
|  10006  | Invalid User Id                                               |
|  10007  | Account Upgrade Error                                         |
|  10008  | Account Create Error                                          |
|  10009  | API Error                                                     |
|  1000A  | Validation Error                                              |
```

#### 7. Smile ID Generator Service
```
|  Error  |                              Error                            |
|  Code   |                           Description                         |  
| ------- | ------------------------------------------------------------- |
|  99000  | Bad Request                                                   |
|  99001  | Duplicate Reserved Id                                         |
|  99002  | Internal Error                                                |
|  99003  | Invalid Smile User Type                                       |
|  99004  | Invalid Smile Id                                              |
|  99005  | User Already Exists                                           |
|  99006  | User Does Not Exists                                          |
|  99007  | Unauthorized                                                  |
```

#### 8. Block Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|  13000  | Unable To Block User                                          |
|  13001  | Unable To Unblock User                                        |
|  13002  | Unable To Unblock All User                                    |
|  13003  | Unable To Check If User Has Block Status                      |
|  13004  | Unable To Get All Block For User                              |
|  13005  | Unable To Get Block By Its Id                                 |
|  13006  | Unable To Save Block History                                  |
|  13007  | Route Not Found                                               |
|  13008  | Unauthorized                                                  |
|  13009  | Internal Error Found                                          |
|  1300A  | Input Error                                                   |
|  1300B  | Validator Error                                               |
```

#### 18. Block DB Controller
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   4000  | Route Not Found                                               |
|   4001  | Unauthorized                                                  |
|   4002  | Internal Error Found                                          |
|   4003  | Input Error                                                   |
|   4004  | Ban Fetch Error                                               |
|   4005  | Ban Not Found                                                 |
|   4006  | Block Not Found                                               |
|   4007  | Validation Error                                              |
|   4008  | Unable To Delete                                              |
```

<br />

### **Error Code Constants in Java**

#### 1. Phone Verification Service
```
public enum PhoneVerificationErrorCode {
	
    UNABLE_TO_FIND_PHONE_TO_BAN("0x63000"),
    UNABLE_TO_CHECK_BANNED_PN("0x63001"),
    UNABLE_TO_CREATE_REG_TOKEN("0x63002"),
    UNABLE_TO_CREATE_AUTH_TOKEN("0x63003"),
    UNABLE_TO_CHECK_PN_EXIST("0x63004"),
    UNABLE_TO_PN_VALID("0x63005"),
    INTERNAL_ERROR_FOUND("0x63006"),
    ROUTE_NOT_FOUND("0x63007"),
    UNAUTHORIZED("0x63008"),
    INPUT_ERROR("0x63009"),
    VERIFICATION_ERROR_CODE("0x6300A"),
    INVALID_VERIFICATION_CODE("0x6300B"),
    INVALID_VERIFICATION_TOKEN("0x6300C"),
    INVALID_PHONE_NUMBER("0x6300D"),
    TRY_AGAIN("0x6300E"),
    UNABLE_TO_CHECK("0x6300F"),
    UNABLE_TO_ADD_PHONE("0x63010"),
    UNABLE_TO_FETCH_PHONE("0x63011"),
    VALIDATOR_ERROR("0x63012");

    private final String value;

}
```

#### 2. Registration Service
```
public enum RegistrationErrorCode {

    UNABLE_TO_CREATE_NEW_AUTH_TOKEN("0x49000"),
    UNABLE_TO_CHECK_USER_PN("0x49001"),
    UNABLE_TO_REGISTER_USER("0x49002"),
    UNABLE_TO_GET_USER_BY_PN("0x49003"),
    UNABLE_TO_VALIDATE_BEFORE_REGISTRATION("0x49004"),
    UNABLE_TO_EXTRACT_PN("0x49005"),
    UNABLE_TO_ADD_USER("0x49006"),
    UNABLE_TO_ADD_PN_FOR_USER("0x49007"),
    INTERNAL_ERROR_FOUND("0x49008"),
    ROUTE_NOT_FOUND("0x49009"),
    UNAUTHORIZED("0x4900A"),
    INPUT_ERROR("0x4900B"),
    UNABLE_TO_DELETE_STATE("0x4900C"),
    INVALID_PHONE("0X4900D"),
    VALIDATION_ERROR("0x4900E"),
    REGISTRATION_ERROR("0x4900F"),
    VERIFICATION_ERROR_CODE("0x49010");

    private final String value;

}
```

#### 3. Auth Service
```
public enum AuthErrorCode {

    INVALID_RT("0x98000"),
    INVALID_AT("0x98001"),
    UNABLE_TO_REMOVE_SESSION("0x98002"), 
    UNABLE_TO_CREATE_NEW_SESSION("0x98003"),
    UNABLE_TO_CREATE_NEW_JWT_AT("0x98004"),
    UNABLE_TO_CREATE_NEW_USER_SESSION("0x98005"),
    UNABLE_TO_CHECK_RT_EXIST("0x98006"),
    UNABLE_TO_FETCH_USER_ID_BY_RT("0x98007"),
    UNABLE_TO_CHECK_SESSION_EXIST("0x98008"),
    UNABLE_TO_FETCH_USER_DATA_BY_PN("0X98009"),
    INTERNAL_ERROR_FOUND("0x9800A");

    private final String value;

}
```

#### 4. User Info Service
```
public enum UserInfoErrorCode {

    AAA("0x19000"),
    AAA("0x19000"),
    AAA("0x19000");

    private final String value; 

}
```

#### 5. ME Service
```
public enum MeErrorCode {

    ROUTE_NOT_FOUND("0x81000"),
    UNAUTHORIZED("0x81001"),
    DATA_NOT_FOUND("0x81002"),
    PHONE_NUMBER_NOT_FOUND("0x81003"),
    EMAIL_NOT_FOUND("0x81004"),
    PICTURE_NOT_FOUND("0x81005"),
    INTERNAL_ERROR_FOUND("0x81006"),
    USER_IS_BLOCKED("0x81007");

    private final String value;

}
```

#### 6. Multiple Account Service
```
public enum MultipleAccountErrorCode {
    
    BAD_REQUEST("0x10000"),
    ERROR_CREATING_HERMES_ACCOUNT("0x10001"),
    ERROR_CREATING_SMILE_ID("0x10002"),
    INTERNAL_ERROR("0x10003"),
    RESOURCE_NOT_FOUND("0x10004"),
    UNAUTHORIZED("0x10005"),
    INVALID_USER_ID("0x10006"),
    ACCOUNT_UPGRADE_ERROR("0x10007"),
    ACCOUNT_CREATE_ERROR("0x10008"),
    API_ERROR("0x10009"),
    VALIDATION_ERROR("0x1000A");

    private final String value;
    
}
```

#### 7. Smile ID Generator Service
```
public enum SmileIdGeneratorErrorCode {

    BAD_REQUEST("0x99000"),
    DUPLICATE_RESERVED_ID("0x99001"),
    INTERNAL_ERROR("0x99002"),
    INVALID_SMILE_USER_TYPE("0x99003"),
    INVALID_SMILE_ID("0x99004"),
    USER_ALREADY_EXISTS("0x99005"),
    USER_DOES_NOT_EXISTS("0x99006"),
    UNAUTHORIZED("0x99007");

    private final String value;

}
```

#### 8. Block Service
```
public enum BlockErrorCode {

    UNABLE_TO_BLOCK_USER("0x13000"),
    UNABLE_TO_UNBLOCK_USER("0x13001"),
    UNABLE_TO_UNBLOCK_ALL_USER("0x13002"),
    UNABLE_TO_CHECK_USER_BLOCK_STATUS("0x13003"),
    UNABLE_TO_GET_ALL_USER_BLOCKS("0x13004"),
    UNABLE_TO_GET_BLOCK_BY_ID("0x13005"),
    UNABLE_TO_SAVE_BLOCK_HISTORY("0x13006"),
    ROUTE_NOT_FOUND("0x13007"),
    UNAUTHORIZED("0x13008"),
    INTERNAL_ERROR_FOUND("0x13009"),
    INPUT_ERROR("0x1300A"),
    VALIDATOR_ERROR("0x1300B");

    private final String value;

}
```

#### 18. Block DB Controller
```
public enum BlockDBErrorCode {

    ROUTE_NOT_FOUND("0x4000"),
    UNAUTHORIZED("0x4001"),
    INTERNAL_ERROR_FOUND("0x4002"),
    INPUT_ERROR("0x4003"),
    BAN_FETCH_ERROR("0x4004"),
    BAN_NOT_FOUND("0x4005"),
    BLOCK_NOT_FOUND("0x4006"),
    VALIDATION_ERROR("0X4007"),
    UNABLE_TO_DELETE("0x4008");

    private final String value;

}
```

<br />

### **Smilepay Mobile App Popup Error Messages**

#### 1. Phone Verification Service
```
|  Error  |   Error Message   |                   Error                   |
|  Code   |      Title        |               Message content             |  
| ------- | ------------------------------------------------------------- |
|  00000  | 00000000000000000 | 0000000000000000000000000000000000000000  |
|         |                   |                                           |
|         |                   |                                           |
```

#### 2. Registration Service
```
|  Error  |   Error Message   |                   Error                   |
|  Code   |      Title        |               Message content             |  
| ------- | ------------------------------------------------------------- |
|  00000  | 00000000000000000 | 0000000000000000000000000000000000000000  |
|         |                   |                                           |
|         |                   |                                           |
```

#### 3. Auth Service
```
|  Error  |   Error Message   |                   Error                   |
|  Code   |      Title        |               Message content             |  
| ------- | ------------------------------------------------------------- |
|  00000  | 00000000000000000 | 0000000000000000000000000000000000000000  |
|         |                   |                                           |
|         |                   |                                           |
```

#### 5. ME Service
```
|  Error  |   Error Message   |                   Error                   |
|  Code   |      Title        |               Message content             |  
| ------- | ------------------------------------------------------------- |
|  00000  | 00000000000000000 | 0000000000000000000000000000000000000000  |
|         |                   |                                           |
|         |                   |                                           |
```


<br />

## Security Concerns
Security Concern 1: <br />
N/A
