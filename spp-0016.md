## Preamble

```
SPP: 0016
Title: Error Code
Author: Smilepay
Status: Active
Created: 04-01-2022
Updated: 05-01-2022
Discussion: N/A
```

## Description
Is a 4 digit hexadeciaml code that is used to determine the nature of an error and why it occurred. The first digit is a specific identifier while the other three are error numbers.

<br />

### The First Identifier Digits
```
|    The 1st digit       |                    Meaning                     |
| numerical identifier   |                  (Which .ms?)                  |  
| ---------------------- | ---------------------------------------------- |
|          1             | Phone Authentication Service                   |
|          2             | Registration Service                           |
|          3             | Auth (Authorization/Authentication) Service    |
|          4             | User Info Service                              |
|          5             | ME Service                                     |
|          6             | Multiple Account Service                       |
|          7             | Smile ID Generator Service                     |
|          8             | Block Service                                  |
|          9             | Transaction Control Service                    |
|         10             | Multiple Account Service                       |
|         11             | Hermes                                         |
|         12             | Database Transaction Service                   |
|         13             | Multiple Account DB Controller                 |
|         14             | Transaction History DB Controller              |
|         15             | Quota DB Controller                            |
|         16             | Exception Quota DB Controller                  |
|         17             | Limit DB Controller                            |
|         18             | Block DB Controller                            |
|         19             | Sub-Agent DB Controller                        |    
```

<br />

### The Last 3 Hexadecimal Digits
To calculate the possible number of combinations for the last three hexadecimal digits: <br /> 

16^3 = 4096
                   
which means there are 4095 possible error codes to be assigned for each identifier & here are some:
``` 
    | Decimal   | Hex     | 
    | base 10   | base 16 |
    | --------- | ------- |
    |    0	|    0    |
    |    1	|    1    |
    |    2	|    2    |
    |    3	|    3    |
    |    4	|    4    |
    |    5	|    5    |
    |    6	|    6    |
    |    7	|    7    |
    |    8	|    8    |
    |    9	|    9    |
    |   10	|    A    |
    |   11      |    B    |
    |   12	|    C    |
    |   13	|    D    |
    |   14	|    E    |
    |   15      |    F    |
    |   16	|   10    |
    |   17	|   11    |
    |   18	|   12    |
    |   19	|   13    |
    |   20	|   14    |
    |   21	|   15    |
    |   22	|   16    |
    |   23	|   17    |
    |   24	|   18    |
    |   25	|   19    |
    |   26	|   1A    |
    |   27	|   1B    |
    |   28	|   1C    |
    |   29	|   1D    |
    |   30	|   1E    |
    |   40	|   28    |
    |   50	|   32    |
    |   60	|   3C    |
    |   70	|   46    |
    |   80	|   50    |
    |   90	|   5A    |
    |  100	|   64    |
    |  200	|   C8    |
    | 1000	|  3E8    |
    | 2000	|  7D0    |
    | 3000      |  BB8    |
    | 4000      |  FA0    |
    | 4095      |  FFF    |
```

<br />

## Specification
### Error Code & Description

#### 1. Phone Authentication Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   1001  | Unable To Find Phone To Ban                                   |
|   1002  | Unable To Check If Phone Number Is Banned Or Not              |
|   1003  | Unable To Fetch Phone Number                                  |
|   1004  | Unable To Create Registration Token                           |
|   1005  | Unable To Create Authentication Permission Token              |
|   1006  | Unable To Check If Phone Number Exists                        |
|   1007  | Unable To Validate Phone Number                               |
|   1008  | Unable To Add New Phone Number                                |
|   1009  | Unable To Fetch Phone Number                                  |
```

#### 2. Registration Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   2001  | Unable To Create A New Authentication Permission Token        |
|   2002  | Unable To Check User Registered With Given Phone Number       |
|   2003  | Unable To Register User                                       |
|   2004  | Unable To Get User By Phone Number                            |
|   2005  | Unable To Validate Data Before Registering User               |
|   2006  | Unable To Validate Phone Number                               |
|   2007  | Unable To Extract Phone Number                                |
|   2008  | Unable To Add User                                            |
|   2009  | Unable To Add Phone Number For User                           |
```

#### 3. Auth Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   3001  | Invalid Refresh Token                                         |
|   3002  | Invalid Authorization Token                                   |
|   3003  | Unable To Remove Session                                      |
|   3004  | Unable To Create New Session                                  |
|   3005  | Unable To Create New JWT Auth Token                           |
|   3006  | Unable To Create New Session For New User                     |
|   3007  | Unable To Check If Refresh Token Exists Or Not                |
|   3008  | Unable To Fetch User Id By Refresh Token                      |
|   3009  | Unable To Check If A Session Exists                           |
|  30010  | Unable To Fetch User Data By Phone Number                     |
```

#### 5. ME Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   5001  | Route Not Found                                               |
|   5002  | Unauthorized                                                  |
|   5003  | Data Not Found                                                |
|   5004  | Phone Number Not Found                                        |
|   5005  | Email Not Found                                               |
|   5006  | Picture Not Found                                             |
|   5007  | Internal Error Found                                          |
|   5008  | User Is Blocked                                               |
```

#### 7. Smile ID Generator Service
```
|  Error  |                              Error                            |
|  Code   |                           Description                         |  
| ------- | ------------------------------------------------------------- |
|   7001  | Bad Request                                                   |
|   7002  | Duplicate Reserved Id                                         |
|   7003  | Internal Error                                                |
|   7004  | Invalid Smile User Type                                       |
|   7005  | Invalid Smile Id                                              |
|   7006  | User Already Exists                                           |
|   7007  | User Does Not Exists                                          |
|   7008  | Unauthorized                                                  |
```

#### 8. Block Service
```
|  Error  |                             Error                             |
|  Code   |                          Description                          |  
| ------- | ------------------------------------------------------------- |
|   8001  | Unable To Block User                                          |
|   8002  | Unable To Unblock User                                        |
|   8003  | Unable To Unblock All User                                    |
|   8004  | Unable To Check If User Has Block Status                      |
|   8005  | Unable To Get All Block For User                              |
|   8006  | Unable To Get Block By Its Id From Block DB Controller        |
|   8007  | Unable To Get All Blocks For User Using The DB Controller     |
|   8008  | Unable To Save Block History                                  |
```

<br />

### Error Code Constants in Java

#### 1. Phone Authentication Service
```
public class PhoneAutheErrorCode {
	
	public static final String UNABLE_TO_FIND_PHONE_TO_BAN = "0x1001";
	public static final String UNABLE_TO_CHECK_BANNED_PN = "0x1002";
	public static final String UNABLE_TO_FETCH_PN = "0x1003";
	public static final String UNABLE_TO_CREATE_REG_TOKEN = "0x1004";
	public static final String UNABLE_TO_CREATE_AUTH_TOKEN = "0x1005";
	public static final String UNABLE_TO_CHECK_PN_EXIST = "0x1006";
	public static final String UNABLE_TO_PN_VALID = "0x1007";
	public static final String UNABLE_TO_ADD_NEW_PN = "0x1008";
	public static final String UNABLE_TO_FETCH_PN = "0x1009";

}
```

#### 2. Registration Service
```
public class RegistErrorCode {

	public static final String UNABLE_TO_CREATE_NEW_AUTH_TOKEN = "0x2001";
	public static final String UNABLE_TO_CHECK_USER_PN = "0x2002";
	public static final String UNABLE_TO_REGISTER_USER = "0x2003";
	public static final String UNABLE_TO_GET_USER_BY_PN = "0x2004";
	public static final String UNABLE_TO_VALIDATE_BEFORE_REGIST = "0x2005";
	public static final String UNABLE_TO_VALIDATE_PN = "0x2006";
	public static final String UNABLE_TO_EXTRACT_PN = "0x2007";
	public static final String UNABLE_TO_ADD_USER = "0x2008";
	public static final String UNABLE_TO_ADD_PN_FOR_USER = "0x2009";
	
}
```

#### 3. Auth Service
```
public class AuthErrorCode {

	public static final String INVALID_RT = "0x3001"; 
	public static final String INVALID_AT = "0x3002";
	public static final String UNABLE_TO_REMOVE_SESSION = "0x3003"; 
	public static final String UNABLE_TO_CREATE_NEW_SESSION = "0x3004";
	public static final String UNABLE_TO_CREATE_NEW_JWT_AT = "0x3005";
	public static final String UNABLE_TO_CREATE_NEW_USER_SESSION = "0x3006";
	public static final String UNABLE_TO_CHECK_RT_EXIST = "0x3007";
	public static final String UNABLE_TO_FETCH_USER_ID_BY_RT = "0x3008";
	public static final String UNABLE_TO_CHECK_SESSION_EXIST = "0x3009";
	public static final String UNABLE_TO_FETCH_USER_DATA_BY_PN = "0X30010";

}
```

#### 5. ME Service
```
public class MeErrorCode {

	public static final String ROUTE_NOT_FOUND = "0x5001";
	public static final String UNAUTHORIZED = "0x5002";
	public static final String DATA_NOT_FOUND = "0x5003";
	public static final String PHONE_NUMBER_NOT_FOUND = "0x5004";
	public static final String EMAIL_NOT_FOUND = "0x5005";
	public static final String PICTURE_NOT_FOUND = "0x5006";
	public static final String INTERNAL_ERROR_FOUND = "0x5007";
	public static final String USER_IS_BLOCKED = "0x5008";

}
```

#### 7. Smile ID Generator Service
```
public class SmileIdGeneratorErrorCode {

    public static final String BAD_REQUEST = "0x7001";
    public static final String DUPLICATE_RESERVED_ID = "0x7002";
    public static final String INTERNAL_ERROR = "0x7003";
    public static final String INVALID_SMILE_USER_TYPE = "0x7004";
    public static final String INVALID_SMILE_ID = "0x7005";
    public static final String USER_ALREADY_EXISTS = "0x7006";
    public static final String USER_DOES_NOT_EXISTS = "0x7007";
    public static final String UNAUTHORIZED = "0x7008";

}
```

#### 8. Block Service
```
public class BlockErrorCode {

    public static final String UNABLE_TO_BLOCK_USER = "0x8001";
    public static final String UNABLE_TO_UNBLOCK_USER = "0x8002";
    public static final String UNABLE_TO_UNBLOCK_ALL_USER = "0x8003";
    public static final String UNABLE_TO_CHECK_USER_BLOCK_STATUS = "0x8004";
    public static final String UNABLE_TO_GET_ALL_USER_BLOCKS = "0x8005";
    public static final String UNABLE_TO_GET_BLOCK_BY_ID = "0x8006";
    public static final String UNABLE_TO_GET_ALL_USER_BLOCKS = "0x8007";
    public static final String UNABLE_TO_SAVE_BLOCK_HISTORY = "0x8008";

}
```

<br />

## Security Concerns
Security Concern 1: <br />
N/A
